<!doctype html><html class="theme-next muse use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="tomcat,"><link rel="alternate" href="/atom.xml" title="XiuXiu" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/uploads/favicon.ico?v=5.1.0"><meta name="description" content="tomcat安装下载地址将 tomcat 文件夹复制到 /Library 目录下,然后修改权限 1sudo chmod 755 /Library/tomcat 添加环境变量 1export PATH=$PATH:/Users/yourname/Library/tomcat/bin 验证tomcat是否安装成功执行 startup.sh 命令启动 tomcat 1startup.sh"><meta name="keywords" content="tomcat"><meta property="og:type" content="article"><meta property="og:title" content="tomcat"><meta property="og:url" content="http://yoursite.com/java/tomcat/index.html"><meta property="og:site_name" content="XiuXiu"><meta property="og:description" content="tomcat安装下载地址将 tomcat 文件夹复制到 /Library 目录下,然后修改权限 1sudo chmod 755 /Library/tomcat 添加环境变量 1export PATH=$PATH:/Users/yourname/Library/tomcat/bin 验证tomcat是否安装成功执行 startup.sh 命令启动 tomcat 1startup.sh"><meta property="og:image" content="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午4.23.05.png"><meta property="og:image" content="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午5.03.47.png"><meta property="og:image" content="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午5.08.18.png"><meta property="og:updated_time" content="2017-07-28T02:16:06.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="tomcat"><meta name="twitter:description" content="tomcat安装下载地址将 tomcat 文件夹复制到 /Library 目录下,然后修改权限 1sudo chmod 755 /Library/tomcat 添加环境变量 1export PATH=$PATH:/Users/yourname/Library/tomcat/bin 验证tomcat是否安装成功执行 startup.sh 命令启动 tomcat 1startup.sh"><meta name="twitter:image" content="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午4.23.05.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",sidebar:{position:"left",display:"post",offset:12,offset_float:0,b2t:!1,scrollpercent:!1},fancybox:!0,motion:!0,duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/java/tomcat/"><title>tomcat | XiuXiu</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">XiuXiu</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://yoursite.com/java/tomcat/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiuxiu"><meta itemprop="description" content=""><meta itemprop="image" content="/uploads/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="XiuXiu"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">tomcat</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-28T10:31:34+08:00">2017-06-28 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="http://tomcat.apache.org" target="_blank" rel="external">下载地址</a><br>将 <code>tomcat</code> 文件夹复制到 <code>/Library</code> 目录下,然后修改权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod 755 /Library/tomcat</div></pre></td></tr></table></figure><p>添加环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=$PATH:/Users/yourname/Library/tomcat/bin</div></pre></td></tr></table></figure><p>验证tomcat是否安装成功<br>执行 <code>startup.sh</code> 命令启动 <code>tomcat</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">startup.sh</div></pre></td></tr></table></figure><a id="more"></a><p>打开 <a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a> 验证tomcat是否安装成功<br><img src="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午4.23.05.png" alt="屏幕快照 2017-07-27 下午4.23.05"></p><p>##配置Tomcat启动脚本</p><p>Tomcat的目录层次结构<br>使用文本编辑器添加以下代码：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></div><div class="line">start)</div><div class="line">sh /Users/yourname/Library/tomcat/bin/startup.sh</div><div class="line">;;</div><div class="line">stop)</div><div class="line">sh /Users/yourname/Library/tomcat/bin/shutdown.sh</div><div class="line">;;</div><div class="line">restart)</div><div class="line">sh /Users/yourname/Library/tomcat/bin/shutdown.sh</div><div class="line">sh /Users/yourname/Library/tomcat/bin/startup.sh</div><div class="line">;;</div><div class="line">*)</div><div class="line"><span class="built_in">echo</span> “Usage: start|stop|restart”</div><div class="line">;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure><p><code>/Users/yourname/Library/tomcat/bin</code> 要根据tomcat实际的安装路径来写</p><p>将文件保存为 <code>tomcat</code> 小写并不带后缀，存放到 <code>/usr/local/bin</code> 或 <code>/usr/bin</code> 。赋予文件执行权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod 777 tomcat</div></pre></td></tr></table></figure><p>之后便可以在终端中简单地输入 <code>tomcat start</code> 和 <code>tomcat stop</code> 启用和关闭tomcat了。<br>快捷命令如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tomcat start </div><div class="line">tomcat stop</div><div class="line">tomcat restart</div></pre></td></tr></table></figure><h2 id="Tomcat-目录的结构"><a href="#Tomcat-目录的结构" class="headerlink" title="Tomcat 目录的结构"></a>Tomcat 目录的结构</h2><p>bin: 存放启动和关闭tomcat的脚本文件</p><p>conf：存放tomcat服务器的各种配置文件</p><p>lib: 存放tomcat服务器支撑的jar包</p><p>logs: 存放tomcat的日志文件</p><p>temp: 存放tomcat运行时产生的临时文件</p><p>webapps: web应用虽在目录，即供外界访问的web资源的存放目录</p><p>work: tomcat的工作目录</p><p>主要文件介绍<br>bin</p><blockquote><p>catalina.sh 用于启动和关闭tomcat服务器<br>configtest.sh 用于检查配置文件<br>startup.sh 启动tomcat脚本<br>shutdown.sh 关闭tomcat脚本</p></blockquote><p>conf</p><blockquote><p>server.xml tomcat 的全局配置文件<br>web.xml 为不同的tomcat配置的web应用设置缺省值的文件<br>tomcat-users.xml tomcat用户认证的配置文件<br>logging.properties tomcat通过自己内部实现的JAVA日志记录器来记录操作相关的日志<br>context.xml：所有host的默认配置信息</p></blockquote><p>logs</p><blockquote><p>localhost_access_log.2017-06-28.txt 访问日志<br>localhost.2017-06-28.log 错误和其它日志<br>manager.2017-06-28.log 管理日志<br>catalina.2017-06-28.log tomcat启动或关闭日志文件</p></blockquote><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="静态部署"><a href="#静态部署" class="headerlink" title="静态部署"></a>静态部署</h3><p>1.直接将 <code>web</code> 项目文件件拷贝到 <code>webapps</code> 目录中<br>将 <code>war</code> 包直接拷贝到 <code>webapps</code> 目录中，服务器会自动解开这个 <code>war</code> 包，并在这个目录下生成一个同名的文件夹<br><code>webapps</code> 这个默认的应用目录也是可以改变。打开 <code>tomcat</code> 的 <code>conf</code> 目录下的 <code>server.xml</code> 文件，找到下面内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Host name=&quot;localhost&quot; appBase=&quot;webapps&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;</div></pre></td></tr></table></figure><p>将 <code>appBase</code> 修改即可。</p><p>2.在 <code>server.xml</code> 中指定<br>在 <code>tomcat</code> 的配置文件中，一个 <code>Web</code> 应用就是一个特定的 <code>Context</code> ，可以通过在 <code>server.xml</code> 中新建 <code>Context</code> 里部署一个 <code>JSP</code> 应用程序。打开 <code>server.xml</code> 文件，在 <code>Host</code> 标签内建一个 <code>Context</code> ，内容如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;Context path =&quot;/hello&quot; docBase =&quot;/Users/yourname/workspace/hello/WebRoot&quot; debug =&quot;0&quot; privileged =&quot;true&quot;&gt;</div><div class="line">&lt;/Context&gt;</div></pre></td></tr></table></figure><p>参数说明：</p><blockquote><p>path： 是虚拟路径；<br>docBase： 是应用程序的物理路径；<br>workDir： 是这个应用的工作目录，存放运行时生成的与这个应用相关的文件；<br>debug： 则是设定 debug level, 0 表示提供最少的信息， 9 表示提供最多的信息<br>privileged： 设置为 true 的时候，才允许 Tomcat 的 Web 应用使用容器内的 Servlet<br>reloadable： 如果为 true ，则 tomcat 会自动检测应用程序的 /WEB-INF/lib 和 /WEB-INF/classes 目录的变化，自动装载新的应用程序，可以在不重起 tomcat 的情况下改变应用程序，实现热部署<br>antiResourceLocking 和 antiJARLocking： 热部署是需要配置的参数，默认 false 避免 更新了某个 webapp ，有时候 Tomcat 并不能把旧的 webapp 完全删除，通常会留下 WEB-INF/lib 下的某个 jar 包，必须关闭 Tomcat 才能删除，这就导致自动部署失败。设置为 true ， Tomcat 在运行对应的 webapp 时，会把相应的源文件和 jar 文件复制到一个临时目录里。</p></blockquote><p>3.创建一个Context 文件<br>在 <code>conf\Catalina\localhost</code> 目录中，新建一个 <code>xml</code> 文件，名字不可以随意取，要和 <code>path</code> 后的那个名字一致，按照下边这个 <code>path</code> 的配置， <code>xml</code> 的名字应该就应该是 <code>hello</code> （ hello.xml ），该 <code>xml</code> 文件的内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;Context path =&quot;/hello&quot; docBase =&quot;/Users/yourname/workspace/hello/WebRoot&quot; debug =&quot;0&quot; privileged =&quot;true&quot;&gt;</div><div class="line">&lt;/Context&gt;</div></pre></td></tr></table></figure><blockquote><p>注：删除一个 Web 应用同时也要删除 webapps 下相应的文件夹和 server.xml 中相应的 Context ，还要将 Tomcat 的 conf/catalina/localhost 目录下相应的 xml 文件删除，否则 Tomcat 仍会去配置并加载。</p></blockquote><h3 id="动态部署"><a href="#动态部署" class="headerlink" title="动态部署"></a>动态部署</h3><p>先了解 <code>tomcat</code> 图形管理接口<br><img src="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午5.03.47.png" alt="屏幕快照 2017-07-27 下午5.03.47"></p><p><code>Server Status</code> 主要用来查看服务器的状态<br><code>Manager App</code> 主要用来管理应用程序的部署及监控<br><code>Host Manager</code> 主要用来管理虚拟主机</p><p>Manager 的四个管理角色：</p><blockquote><p>manager-gui - allows access to the HTML GUI and the status pages<br>manager-script - allows access to the text interface and the status pages<br>manager-jmx - allows access to the JMX proxy and the status pages<br>manager-status - allows access to the status pages only</p></blockquote><p>在用户认证的配置文件 <code>tomcat-users.xml</code> 文件中添加用户名和密码:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;role rolename=&quot;tomcat&quot;/&gt;</div><div class="line">&lt;role rolename=&quot;manager-gui&quot;/&gt;</div><div class="line">&lt;role rolename=&quot;admin-gui&quot;/&gt;</div><div class="line">&lt;user username=&quot;tomcat&quot; password=&quot;tomcat&quot; roles=&quot;tomcat,manager-gui,admin-gui&quot;/&gt;</div></pre></td></tr></table></figure><p>登陆 tomcat 管理控制台： <a href="http://localhost:8080/manager/html" target="_blank" rel="external">http://localhost:8080/manager/html</a> ，输入上面配置的用户名和密码后便可管理应用并动态发布。<br><img src="http://oimhz3xpl.bkt.clouddn.com/屏幕快照 2017-07-27 下午5.08.18.png" alt="屏幕快照 2017-07-27 下午5.08.18"><br>在 <code>Context Path(required)</code> 中输入 <code>/yourwebname</code> ，这代表你的应用的访问地址。<br><code>XML Configration file URL</code> 中要指定一个 <code>xml</code> 文件，比如我们在 /user/yourname/work/ 下建立一个 <code>hellow.xml</code> 文件，内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Context reloadable=&quot;false&quot; /&gt;</div></pre></td></tr></table></figure><p>其中 <code>docBase</code> 不用写了，因为在下一个文本框中填入。或者更简单点，这个文本框什么都不填，在 WAR or Directory URL: 中键入 /user/yourname/work/hello.war 即可，然后点击 Deploy 按钮，上面就可以看到了 web 应用程序，名字就 <code>Context Path(required)</code> 中的名字。</p><p>或者直接使用下面的 <code>Select WAR file uploae</code> 点击浏览选择 <code>war</code> 文件，然后点击<code>Deploy</code> 即可。</p><h3 id="远程部署"><a href="#远程部署" class="headerlink" title="远程部署"></a>远程部署</h3><p>首先你要知道远程服务1：IP或域名，2:用户名，密码 3:远程服务器已经装有 <code>ssh</code><br>登录到远程服务器（一般服务机都会提供ssh协议）：<code>ssh username@servername</code><br>接下来会提示输入密码：<code>password</code></p><p>密码正确后会进入服务提供的根目录中，这时候可以进入到tomact目录中.<br>关闭tomcat服务要先进入tomcat的bin目录然后输入：<code>./shutdown.sh</code><br>启动tomcat服务要在bin 目录中输入：<code>./startup.sh</code></p><p>如果要查看启动运行日志可以进入logs目录下，然后输入：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tail  -f catalina.out</div></pre></td></tr></table></figure><p>这样就可以查看动态日志, <code>ctrl＋c</code> 退出</p><p>复制本地文件到服务器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp /path/filename username@servername:/path</div></pre></td></tr></table></figure><p>复制目录到服务器使用 <code>scp -r</code></p><p>复制本地文件到服务器并重新启动 <code>tomcat</code> 就完成了部署。</p><p>还有一些其它操作：<br>删除某个文件目录（如果把 <code>-r</code> 换成 <code>-rf</code> 就不会每次让你一个一个确认了）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -r 目标文件</div></pre></td></tr></table></figure><p>删除某个文件直接（执行删除时会提示是否要删除，输入：y 表示确认）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm 目标文件</div></pre></td></tr></table></figure><p>编辑文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim server.xml</div></pre></td></tr></table></figure><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="jdk版本切换"><a href="#jdk版本切换" class="headerlink" title="jdk版本切换"></a>jdk版本切换</h3><p>JDK的安装目录(版本号根据情况略有不同)</p><blockquote><p>JDK 1.6：/Library/Java/JavaVirtualMachines/1.6.0.jdk<br>JDK 1.7：/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk<br>JDK 1.8：/Library/Java/JavaVirtualMachines/jdk1.8.0_65.jdk</p></blockquote><p>打开 <code>~/.bash_profile</code> 文件（zsh 打开<code>~/.zshrc</code> ），添加如下内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> 设置 JDK 6</span></div><div class="line">export JAVA_6_HOME=`/usr/libexec/java_home -v 1.6` </div><div class="line"><span class="meta">#</span><span class="bash"> 设置 JDK 7 </span></div><div class="line">export JAVA_7_HOME=`/usr/libexec/java_home -v 1.7` </div><div class="line"><span class="meta">#</span><span class="bash"> 设置 JDK 8 </span></div><div class="line">export JAVA_8_HOME=`/usr/libexec/java_home -v 1.8`</div><div class="line"><span class="meta"> #</span><span class="bash">默认JDK 7 </span></div><div class="line">export JAVA_HOME=$JAVA_7_HOME </div><div class="line"><span class="meta">#</span><span class="bash"><span class="built_in">alias</span>命令动态切换JDK版本 </span></div><div class="line">alias jdk6="export JAVA_HOME=$JAVA_6_HOME” </div><div class="line">alias jdk7="export JAVA_HOME=$JAVA_7_HOME” </div><div class="line">alias jdk8="export JAVA_HOME=$JAVA_8_HOME"</div></pre></td></tr></table></figure><h3 id="tomcat报错解决"><a href="#tomcat报错解决" class="headerlink" title="tomcat报错解决"></a>tomcat报错解决</h3><p>启动失败，在 <code>catalina.2017-06-28.log</code> 报如下面的错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">org.apache.catalina.core.StandardContext.startInternal Context [/hello] startup failed due to previous errors</div></pre></td></tr></table></figure><p>这个时候此应用就启动失败了，访问会出现404错误。但是日志里面也没有写具体是什么问题导致启动失败，对调试带来了一些困难，下面是解决方法：<br>在 <code>tomcat</code> 的 <code>conf/loggings.properties</code> 文件或者该应用的 <code>WEB-INF/classes</code> 目录中新建一个 <code>loggings.properties</code> 文件，再加上以下两句：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">org.apache.catalina.core.ContainerBase.[Catalina].level = INFO</div><div class="line">org.apache.catalina.core.ContainerBase.[Catalina].handlers = </div><div class="line">java.util.logging.ConsoleHandler</div></pre></td></tr></table></figure><p>之后重启 <code>tomcat</code>，这样应用再启动失败后就可以在 <code>tomcat</code> 的 <code>logs/catalina.out</code> 或者 <code>logs/localhost_yyyy_mm_dd</code> 日志文件中找到更加详细的错误信息。</p><h3 id="ssh链接错误"><a href="#ssh链接错误" class="headerlink" title="ssh链接错误"></a>ssh链接错误</h3><p>在链接ssh时报如下错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Permanently added (RSA) to the list of known hosts</div></pre></td></tr></table></figure><p>解决给 <code>known_hosts</code> 添加权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod 600 ~/.ssh/known_hosts</div></pre></td></tr></table></figure><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://blog.csdn.net/yangxueyong/article/details/6130065" target="_blank" rel="external">Tomcat部署Web应用方法总结</a><br><a href="http://www.jianshu.com/p/3d0fb3476a26" target="_blank" rel="external">Tomcat系列之服务器的安装与配置以及各组件详解</a></p></div><div></div><div></div><div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/tomcat/" rel="tag"># tomcat</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/java/微信公众号支付/" rel="next" title="微信公众号支付"><i class="fa fa-chevron-left"></i> 微信公众号支付</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/java/Mybatis/" rel="prev" title="Mybatis">Mybatis <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="xiuxiu"><p class="site-author-name" itemprop="name">xiuxiu</p><p class="site-description motion-element" itemprop="description">xiuxiu的日常</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">13</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/AIxiuxiu" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#tomcat"><span class="nav-number">1.</span> <span class="nav-text">tomcat</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装"><span class="nav-number">1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tomcat-目录的结构"><span class="nav-number">1.2.</span> <span class="nav-text">Tomcat 目录的结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#部署"><span class="nav-number">1.3.</span> <span class="nav-text">部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#静态部署"><span class="nav-number">1.3.1.</span> <span class="nav-text">静态部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态部署"><span class="nav-number">1.3.2.</span> <span class="nav-text">动态部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#远程部署"><span class="nav-number">1.3.3.</span> <span class="nav-text">远程部署</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其它"><span class="nav-number">1.4.</span> <span class="nav-text">其它</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jdk版本切换"><span class="nav-number">1.4.1.</span> <span class="nav-text">jdk版本切换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tomcat报错解决"><span class="nav-number">1.4.2.</span> <span class="nav-text">tomcat报错解决</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ssh链接错误"><span class="nav-number">1.4.3.</span> <span class="nav-text">ssh链接错误</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考链接"><span class="nav-number">1.5.</span> <span class="nav-text">参考链接</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 - <span itemprop="copyrightYear">2017</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">xiuxiu</span></div><div class="powered-by">由 <a class="theme-link" href="https://github.com/AIxiuxiu">xiuxiu</a> 创建</div><div class="theme-info">感想 - <span class="theme-link">我只想静静的写代码</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" color="135,218,255" opacity="0.6" count="66" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!1,s=r.title.trim().toLowerCase(),o=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),n=decodeURIComponent(r.url),i=-1,l=-1,p=-1;if(""!=s&&a.forEach(function(e,t){i=s.indexOf(e),l=o.indexOf(e),(i>=0||l>=0)&&(c=!0,0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+n+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>