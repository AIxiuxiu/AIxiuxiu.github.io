<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Hexo 优化和备份]]></title>
    <url>%2Fother%2F---%2F</url>
    <content type="text"><![CDATA[Hexo 优化和备份gulp精简博客代码Next 主题在 Hexo 引擎解析 md 时生成的代码会包含大量的无用空白。这些空白会增加文档的大小,使得网站在响应上不够迅速,影响体验。使用的 gulp 是一个前端项目构建工具,用自动化构建工具增强你的工作流程gulp中文官网。 gulp首先是 gulp 的一些简单介绍：gulp是基于nodejs流的自动化构建工具，可以快速构建项目并减少频繁的I/0操作。你可以利用gulp插件完成各种自动化任务：测试、检查、合并、压缩、格式化、浏览器自动刷新、部署文件生成，并监听文件在改动后重复指定的这些步骤。 安装安装有两种方式：1.全局安装gulp 1npm install -g -d gulp 运行 gulp -v ,如果正常打印版本号则安装成功。 2.安装到项目本地先CD到你的项目根目录 1npm install gulp --save-dev --save-dev 保存 gulp 到项目依赖文件 package.json 的devDependencies 里面。 插件gulp的插件列表可以参考gulp的插件官网。 以下是比较常用的插件 gulp-minify-css 压缩css gulp-htmlmin 压缩html gulp-uglify 压缩js gulp-rename 重命名文件,通常压缩后的带.min后缀 gulp-jshint jshint,js静态检查 gulp-concat 合并多个文件 gulp-imagemin 压缩图片 gulp-clean 清理文件或目录 gulp-load-plugins 自动加载插件 run-sequence 控制任务执行顺序 npm install [plugins-name] –save上述命令安装插件的同时也会把插件作为项目依赖写入package.json文件. gulp APIgulp.src（gobs[, options]) 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中。 123gulp.src('src/js/*.js') //模糊匹配src/js文件夹下所有js文件 .pipe( concat('app.js')) //合并后的文件名 .pipe(gulp.dest('pub/dist/js'));//合并后文件路径 gulp.src通配符匹配：.js匹配当前目录下的所有js文件,不指名扩展名则匹配所有类型 /.js匹配所有第一层子文件夹的js文件,第二层请用//.js**/.js匹配所有文件夹层次下的js文件, 包括当前目录?匹配文件路径中的一个字符(不会匹配路径分隔符)[…]匹配方括号中出现的字符中的任意一个，当方括号中第一个字符为^或!时，则表示不匹配方括号中出现的其他字符中的任意一个.!匹配任何与括号中给定的任一模式都不匹配的 下面以一系列例子来加深理解： 1234567891011*能匹配 a.js,x.y,abc,abc/,但不能匹配a/b.js*.*能匹配 a.js,style.css,a.b,x.y*/*/*.js能匹配 a/b/c.js,x/y/z.js,不能匹配a/b.js,a/b/c/d.js**能匹配 abc,a/b.js,a/b/c.js,x/y/z,x/y/z/a.b,能用来匹配所有的目录和文件**/*.js 能匹配 foo.js,a/foo.js,a/b/foo.js,a/b/c/foo.jsa/**/z能匹配 a/z,a/b/z,a/b/c/z,a/d/g/h/j/k/za/**b/z 能匹配 a/b/z,a/sb/z,但不能匹配a/x/sb/z,因为只有单**单独出现才能匹配多级目录?.js 能匹配 a.js,b.js,c.jsa??能匹配 a.b,abc,但不能匹配ab/,因为它不会匹配路径分隔符[xyz].js只能匹配 x.js,y.js,z.js,不会匹配xy.js,xyz.js等,整个中括号只代表一个字符[^xyz].js能匹配 a.js,b.js,c.js等,不能匹配x.js,y.js,z.js gulp.dest(path[, options]) 能被 pipe 进来，并且将会写文件。并且重新输出（emits）所有数据，因此你可以将它 pipe 到多个文件夹。如果某文件夹不存在，将会自动创建它。 12345gulp.src(&apos;./client/templates/*.jade&apos;) .pipe(jade()) .pipe(gulp.dest(&apos;./build/templates&apos;)) .pipe(minify()) .pipe(gulp.dest(&apos;./build/minified_templates&apos;)); 文件被写入的路径是以所给的相对路径根据所给的目标目录计算而来。类似的，相对路径也可以根据所给的 base 来计算。 gulp.task(name[, deps], fn)定义一个使用 Orchestrator 实现的任务（task）。 123gulp.task(&apos;mytask&apos;, [&apos;array&apos;, &apos;of&apos;, &apos;task&apos;, &apos;names&apos;], function() &#123; // 做一些事&#125;); gulp.watch(glob [, opts], tasks) 或 gulp.watch(glob [, opts, cb])监视文件，并且可以在文件发生改动时候做一些事情。它总会返回一个 EventEmitter 来发射（emit） change 事件。 需要在文件变动后执行的一个或者多个通过 gulp.task() 创建的 task 的名字， 1234var watcher = gulp.watch('js/**/*.js', ['uglify','reload']);watcher.on('change', function(event) &#123; console.log('File ' + event.path + ' was ' + event.type + ', running tasks...');&#125;); 每次变动需要执行的 callback。 123gulp.watch(&apos;js/**/*.js&apos;, function(event) &#123; console.log(&apos;File &apos; + event.path + &apos; was &apos; + event.type + &apos;, running tasks...&apos;);&#125;); gulp优化在hexo顶层目录运行以下代码来安装 gulp 和插件 1npm install --save-dev gulp gulp-clean gulp-load-plugins gulp-minify-css gulp-htmlmin gulp-imagemin gulp-uglify run-sequence 在hexo顶层目录下创建 gulpfile.js 文件 内容如下 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596var gulp = require('gulp'), plugins = require('gulp-load-plugins')(); //自动插件引用var Hexo = require('hexo');var runSequence = require('run-sequence');// 清除public文件夹gulp.task("clean",function() &#123; return gulp.src("public/*") .pipe(plugins.clean()); &#125;);// 压缩css文件gulp.task("minify-css",function() &#123; return gulp.src(["public/**/*.css","!public/**/*.min.css"]) .pipe(plugins.minifyCss(&#123;compatibility: "ie8"&#125;)) .pipe(gulp.dest("./public")); &#125;);// 压缩js文件gulp.task("minify-js",function() &#123; return gulp.src(["public/**/*.js","!public/**/*.min.js"]) .pipe(plugins.uglify()) .pipe(gulp.dest("./public"));&#125;);// 压缩html文件gulp.task("minify-html",function() &#123; return gulp.src("public/**/*.html") .pipe(plugins.htmlmin(&#123; removeComments: true, collapseWhitespace: true, minifyJS: true, minifyCSS: true, minifyURLs: true, &#125;)) .pipe(gulp.dest("./public"));&#125;);// 压缩 public/images 和 /public/uploads目录内图片gulp.task('minify-images', function() &#123; gulp.src(['./public/images/**/*.&#123;png,jpg,gif,ico&#125;','./public/uploads/**/*.&#123;png,jpg,gif,ico&#125;']) .pipe(plugins.imagemin(&#123; optimizationLevel: 5, //类型：Number 默认：3 取值范围：0-7（优化等级） progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片 interlaced: true, //类型：Boolean 默认：false 隔行扫描gif进行渲染 multipass: true, //类型：Boolean 默认：false 多次优化svg直到完全优化 &#125;)) .pipe(gulp.dest('./public/uploads'));&#125;);// 利用Hexo API 来生成博客内容， 效果和在命令行运行： hexo g 一样var hexo = new Hexo(process.cwd(), &#123;&#125;);gulp.task('generate', function(cb) &#123; hexo.init().then(function() &#123; return hexo.call('generate', &#123; watch: false &#125;); &#125;).then(function() &#123; return hexo.exit(); &#125;).then(function() &#123; return cb() &#125;).catch(function(err) &#123; hexo.exit(err); return cb(err); &#125;)&#125;);// 利用Hexo API 来发布博客， 效果和在命令行运行： hexo d 一样gulp.task('deploy', function(cb) &#123; hexo.init().then(function() &#123; return hexo.call('deploy', &#123; watch: false &#125;); &#125;).then(function() &#123; return hexo.exit(); &#125;).then(function() &#123; return cb() &#125;).catch(function(err) &#123; hexo.exit(err); return cb(err); &#125;)&#125;);// 用run-sequence并发执行，同时处理html，css，js，imggulp.task('minify', function(cb) &#123; runSequence(['minify-html', 'minify-css', 'minify-js', 'minify-images'], cb);&#125;);// 执行顺序： 清除public目录 -&gt; 产生原始博客内容 -&gt; 执行压缩混淆gulp.task('build', function(cb) &#123; runSequence('clean', 'generate', 'minify', 'deploy', cb)&#125;);gulp.task('default', ['build']); 到这里对 gulp 的配置就完成了，只需要每次在执行 gulp 就可以生成静态文件并实现发布。 12gulphexo d 但是每次都要把 public 中的文件都删除，重新生成静态文件并发布会比较慢，先记下这个问题，以后解决。 hexo备份备份新建仓库 blog 来存储博客原始文件，先看一下哪些文件是必须备份的：像站点配置 _config.yml，主题 theme，博客文件 source，文章的模板 caffolds，安装包 package.json， 提交忽略配置 .gitignore 这些文件是需要备份的。其它可以不需要，则 .gitignore 如下配置(已经配置好了): 1234567.DS_StoreThumbs.dbdb.json*.lognode_modules/public/.deploy*/ 直接在博客顶层目录使用以下命令： 12345git initgit add -Agit commit -m "first commit"git remote add origin git@github.com:yourName/blog.gitgit push -u origin master 这样就把博客备份到仓库中了。 备份参考链接gulp中文官网优化Hexo博客 - 压缩 HTML、CSS、JS、IMG 等hexo api]]></content>
      <categories>
        <category>other</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo 个人博客]]></title>
    <url>%2Fother%2FHexo%20%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[Hexo 个人博客简介Hexo是基于Node.js的静态博客框架，简单、轻量，其生成的静态网页可以托管在Github。使用 GitHubPages + Hexo，一种简单高效的实现方式来搭建个人的博客。 环境准备安装node.js去nodejs官网下载对应系统的安装包，按提示安装。 或 Homebrew 安装方式，此安装方式无需重启 1brew install node 安装Git一般都安装了，查看是否安装 git 命令，没有安装会提示安装。希望下载最新的可以去git官网下载 安装hexo使用npm安装 1sudo npm install -g hexo-cli 安装完成创建并初始化放博客的文件夹,然后定位到存储博客的目录并安装。 123hexo init &lt;folder&gt;cd &lt;folder&gt;npm install 解决 Error: Cannot find module &#39;./build/Release/DTraceProviderBindings&#39; 错误删除node中的 lib/node_modules/hexo-cli 和 bin/hexo 重新安装 目前我安装所用的本地环境如下：(可以通过hexo -v查看） 123456789101112hexo: 3.3.7hexo-cli: 1.0.3os: Darwin 16.5.0 darwin x64http_parser: 2.7.0node: 6.11.0v8: 5.1.281.102uv: 1.11.0zlib: 1.2.11ares: 1.10.1-DEVicu: 58.2modules: 48openssl: 1.0.2k hexo 命令 hexo generate (hexo g) 生成静态文件，会在当前目录下生成一个新的叫做public的文件夹 hexo server (hexo s) 启动本地web服务，用于博客的预览 hexo deploy (hexo d) 部署播客到远端（比如github, heroku等平台） hexo new (hexo n) “postName” 新建文章 hexo new (hexo n) page “pageName” 新建页面 hexo clean 清除缓存文件和已生成的静态文件 hexo d -g #生成部署 (-g部署之前预先生成静态文件)hexo s -g #生成预览 选项 hexo –safe 安全模式，在安全模式下，不会载入插件和脚本。当您在安装新插件遭遇问题时，可以尝试以安全模式重新执行。 hexo –debug 调试模式，在终端中显示调试信息并记录到 debug.log。当您碰到问题时，可以尝试用调试模式重新执行一次。 hexo –silent 简洁模式，隐藏终端信息 主题设置hexo 提供很多主题 这里选了一个极简的主题NexT，也是Hexo主题中最受欢迎的一个。 下载主题12cd your-hexo-file #Hexo 站点目录git clone https://github.com/iissnan/hexo-theme-next themes/next 失败的话直接到NexT发布页面下载并解压所下载的压缩包至站点的 themes 目录,需要将文件名改为next。 启用主题打开站点配置文件 _config.yml ,找到 theme 字段，并将其值更改为next 在切换主题之后、验证之前， 我们最好清除 Hexo 的缓存 1hexo clean 启动 Hexo 本地站点，并开启调试模式（即加上 –debug），整个命令是 1hexo s --debug 在服务启动的过程，注意观察命令行输出是否有任何异常信息,这些信息将帮助他人更好的定位错误。使用浏览器访问 http://localhost:4000，检查站点是否正确运行。 主题设定基础配置123456789101112title: #你博客的标题subtitle: #你博客的副标题description: #你博客的描述author: #你的名字language: zh-Hans #语言 中文theme: next #安装的主题名称deploy: #发布 type: git #使用Git 发布 repo: https://github.com/username/username.github.io.git #你的Github仓库 url: http://yoursite.com #你的站点地址permalink: :title/ #url结构 SchemeScheme 是 NexT 为提供多种不同的外观而添加的，目前 NexT 支持三种样式他们是： Muse - 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白 Mist - Muse 的紧凑版本，整洁有序的单栏外观 Pisces - 双栏 Scheme，小家碧玉似的清新 更改主题配置文件 scheme 关键字 菜单第一是菜单项（名称和链接），第二是菜单项的显示文本，第三是菜单项对应的图标(Font Awesome)。 菜单名称在 {language}.yml 文件中设置。菜单项的图标，对应的字段是 menu_icon，而 enable 可用于控制是否显示图标，你可以设置成 false 来去掉图标。 添加菜单需要创建页面，如标签界面 1hexo new page tags 创建完成后，在对应的目录下找到 index.md 文件，进行如下的修改： 123456---title: tags # 标签名字（可为空）date: 2017-06-29 16:28:46type: &quot;tags&quot; # 将页面的类型设置为 tags,主题将自动为这个页面显示为标签云comments: false # 如果有启用多说 或者 Disqus 评论，默认页面也会带有评论。需要关闭的话，设置为 false--- type 有分类 categories 标签 tags 侧栏sidebar 字段来控制侧栏的行为其一是侧栏的位置 sidebar.position left - 靠左放置 right - 靠右放置 其二是侧栏显示的时机 sidebar.display post - 默认行为，在文章页面（拥有目录列表）时显示 always - 在所有页面中都显示 hide - 在所有页面中都隐藏（可以手动展开） remove - 完全移除 头像avatar 设置成头像的链接地址。其中，头像的链接地址可以是完整的互联网或站点内的地址（将头像放置主题目录下的 source/images/ 配置为avatar: /images/avatar.png） 否显示阅读全文将 auto_excerpt 的 enable 设置为 ture 则显示阅读全文 12345# Automatically Excerpt. Not recommend.# Please use &lt;!-- more --&gt; in the post to control excerpt accurately.auto_excerpt: enable: ture # 设置是否显示阅读全文 length: 150 或在文章中使用 手动进行截断，Hexo 提供的方式（推荐） 代码高亮NexT 使用 Tomorrow Theme 作为代码高亮，共有5款主题供你选择。 NexT 默认使用的是 白色的 normal 主题，可选的值有 normal，night， night blue， night bright， night eighties。 可更改 highlight_theme 字段 社交链接链接放置在 social 字段下，一行一个链接。其键值格式是 显示文本: 链接地址。设定链接的图标，对应的字段是 social_icons，图标名称 是 Font Awesome 图标的名字（不必带 fa- 前缀） 动画效果use_motion，根据您的需求设置值为 true 或者 false，NexT 默认开启动画效果 12use_motion: true # 开启动画效果use_motion: false # 关闭动画效果 背景动画 canvas_nest 12canvas_nest: true //开启动画canvas_nest: false //关闭动画 背景图片要添加背景图片，首先将图片 background.jpg 放到 /source/uploads/ 目录下，然后，在文件 /css/_custom/custom.styl文件中添加下面一行内容： 1body &#123; background:url(/uploads/background.jpg);&#125; 同样可以添加其它背景，如侧栏背景 sidebar ，头部 header 等。 腾讯公益404页面腾讯公益404页面，寻找丢失儿童，让大家一起关注此项公益事业！ 新建 404.html 页面，放到主题的 source 目录下，内容如下： 123456789101112131415161718&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv="content-type" content="text/html;charset=utf-8;"/&gt; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt; &lt;meta name="robots" content="all" /&gt; &lt;meta name="robots" content="index,follow"/&gt; &lt;link rel="stylesheet" type="text/css" href="https://qzone.qq.com/gy/404/style/404style.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;script type="text/plain" src="http://www.qq.com/404/search_children.js" charset="utf-8" homePageUrl="/" homePageName="回到我的主页"&gt; &lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/data.js" charset="utf-8"&gt;&lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/page.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; Github Pages设置GitHub Pages 本用于介绍托管在GitHub的项目，不过由于他的空间免费稳定，常用来做搭建博客。 每个帐号只能有一个仓库来存放个人主页，而且仓库的名字必须是 username/username.github.io ，这是特殊的命名约定。你可以通过 http://username.github.io 来访问你的个人主页。 仓库创建好就可以部署了，要部署到github，需要在站点配置文件_config.xml中作如下修改： 12345deploy: type: git repo: &lt;repository url&gt; #库（Repository）地址 branch: [branch] #分支名称默认 master message: [message] #自定义提交信息 (默认为 Site updated: &#123;&#123; now(&apos;YYYY-MM-DD HH:mm:ss&apos;) &#125;&#125;) 安装一个扩展：hexo-deployer-git 1npm install hexo-deployer-git --save 然后在命令行中执行 1hexo d 如果出现下面错误，则是因为没有设置好public key所致。 1234Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. 解决：在本机生成public key： 1ssh-keygen -t rsa -C "youremail@example.com" 然后在用户主目录里找到.ssh目录，里面有 id_rsa 和 id_rsa.pub 两个文件。然后登陆github，在SSH设置页面添加上 id_rsa.pub 文件中的内容即可。 插件SitemapSitemap 的目的是要避免搜索引擎的爬虫没有完整的收录整个网页的内容，所以提交 Sitemap 是能够补足搜索引擎的不足，进而加速网页的收录速度，达到搜寻引擎友好的目的。 安装 1npm install hexo-generator-sitemap --save 在 Hexo 根目录下的 _config.yml 里配置一下 123sitemap: path: sitemap.xml template: ./sitemap_template.xml 对于国内用户还需要安装插件 hexo-generator-baidu-sitemap 1npm install hexo-generator-baidu-sitemap --save 添加配置 12baidusitemap: path: baidusitemap.xml 完成之后就可以将 sitemap 文件提交谷歌和百度，提交过程可以查看sunshine小小倩的文章。 RSS安装hexo-generator-feed 1npm install hexo-generator-feed --save 然后在 Hexo 根目录下的 _config.yml 里配置一下 1234feed: type: atom #type 表示类型, 是 atom 还是 rss2. path: atom.xml #path 表示 Feed 路径 limit: 20 #limit 最多多少篇最近文章 添加RSS链接,打开 themes/next/_config.yml 文件，rss: 部分修改为 rss: /atom.xml。 Local Search添加百度/谷歌/本地 自定义站点内容搜索 安装 hexo-generator-searchdb，在站点的根目录下执行以下命令： 1npm install hexo-generator-searchdb --save 编辑站点配置文件，新增以下内容到任意位置： 12345search: path: search.xml field: post format: html limit: 10000 编辑主题配置文件，启用本地搜索功能： 123# Local searchlocal_search: enable: true 博客管理文章可以直接把写好的文章插入到目录 /_posts 下面，后缀为.MD就行，在文章头部固定格式： 1234title: title #文章的标题，这个才是显示的文章标题，其实文件名不影响date: 2015-09-01 20:33:26 #用命令会自动生成，也可以自己写，所以文章时间可以改categories: categories #文章的分类，这个可以自己定义tags: [tag] #tag，为文章添加标签，方便搜索 或 1hexo new &quot;new article&quot; 文件的开头是属性，采用统一的yaml格式，用三条短横线分隔。 分类和标签格式 12345categories:- 日记tags:- Hexo- node.js 草稿相当于很多博客都有的“私密文章”功能。 1hexo new draft &quot;new draft&quot; 会在 source/_drafts 目录下生成一个 new-draft.md 文件。但是这个文件不被显示在页面上，链接也访问不到。也就是说如果你想把某一篇文章移除显示，又不舍得删除，可以把它移动到 _drafts目录之中。 如果你希望强行预览草稿，更改站点配置文件： 1render_drafts: true 或者，如下方式启动server： 1hexo server --drafts 下面这条命令可以把草稿变成文章，或者页面： 1hexo publish [layout] &lt;filename&gt; 参考链接Hexo官网手把手教你使用Hexo + Github Pages搭建个人独立博客Hexo搭建Github-Pages博客填坑教程NexT主题Hexo 入门指南GitHubPages + Hexo — 博客搭建hexo高阶教程]]></content>
      <categories>
        <category>other</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[第一篇博客]]></title>
    <url>%2Fleft%2F%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[第一篇博客一直想写博客的，但一直总是在忙项目，有时间也是玩会儿游戏，最近把游戏卸了，总算有时间了。以后会把写博客养成一个习惯，努力一个星期最少一篇，实在没时间就把之前写到印象笔记的文章重新整理一下。明天把搭建博客的过程写一下。 现在写下来激励自己，加油。]]></content>
      <categories>
        <category>left</category>
      </categories>
      <tags>
        <tag>生活</tag>
      </tags>
  </entry>
</search>